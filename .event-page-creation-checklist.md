# Event Page Creation Checklist

## Overview
This checklist ensures all required steps are completed when creating a new event page (e.g., Tennessee's 7th Congressional District Special Election). Event pages are special hubs for state/local elections with curated articles, hero content, and optional videos.

---

## Prerequisites

### Event Information Needed
- [ ] Event name (English): _____________________________
- [ ] Event slug (URL-friendly): _____________________________
- [ ] State/region: _____________________________
- [ ] Election date: _____________________________
- [ ] Event description (1-2 sentences): _____________________________
- [ ] Color theme:
  - [ ] Orange (default for most events)
  - [ ] Blue (used for Pennsylvania SC 2025)
  - [ ] Purple (used for Georgia PSC 2025)
  - [ ] Green (used for California Redistricting 2025)
  - [ ] Other: _____________________________

---

## Phase 1: Database & Backend Setup

### 1.1 Event Targeting Field
- [ ] Verify `targeted_event` field exists in articles table
- [ ] Determine exact event name format for database (e.g., "Tennessee 7th Congressional District 2025")

### 1.2 Scraper Configuration
**RECOMMENDED**: Add to main scraper (aavm_scraper_v2.py) for flexibility

- [ ] **Add event configuration to `aavm_scraper_v2.py`**
  - File: `aavm-dashboard/aavm_scraper_v2.py`
  - Add event to EVENT_CONFIGS dictionary (around line 280-400)
  - Include:
    - `local_sources`: List of 15-20 local news sites (major + regional papers, TV stations, local news)
    - `search_terms`: Comprehensive list covering district name, candidate names, election terms
    - `max_articles`: Usually 30-35 per run
    - `targeted_event`: Exact database field value (e.g., "Tennessee 7th Congressional District 2025")

- [ ] **Research local news sources thoroughly**
  - Major metro newspapers (e.g., The Tennessean for Nashville)
  - Regional papers (e.g., The Leaf Chronicle for Clarksville)
  - Local TV station websites (e.g., WKRN, News Channel 5)
  - Public radio (e.g., WPLN)
  - Alternative weeklies (e.g., Nashville Scene)
  - Community news sites (e.g., Williamson Home Page, Brentwood Home Page)
  - State political news outlets (e.g., Tennessee Lookout, Tennessee Star)

### 1.3 Manual Scraper Integration (Dashboard)
**CRITICAL**: Must update THREE files for manual scraper checkbox to work

- [ ] **Step 1: Add event checkbox to dashboard settings**
  - File: `aavm-dashboard/app/page.js`
  - Add state variable: `const [eventNameEnabled, setEventNameEnabled] = useState(false);`
  - Add checkbox UI in "Event Scrapers" section (around line 8400-8500)
  - Add to confirmation message
  - Add to API payload in fetch call (around line 1127)
    ```javascript
    body: JSON.stringify({
      categories: selectedCategories,
      eventName: eventNameEnabled  // camelCase format
    })
    ```

- [ ] **Step 2: Update GitHub Action trigger API endpoint** ‚ö†Ô∏è **CRITICAL - OFTEN FORGOTTEN**
  - File: `aavm-dashboard/app/api/trigger-github-action/route.js`
  - Add to request destructuring (line ~6-15):
    ```javascript
    const {
      categories = ['all'],
      eventName = false  // camelCase to match dashboard
    } = await request.json();
    ```
  - Add to logging (line ~20-28)
  - Add to GitHub inputs (line ~58-67):
    ```javascript
    event_name: eventName ? 'true' : 'false'  // snake_case for GitHub Actions
    ```

- [ ] **Step 3: Update GitHub Actions workflow file**
  - File: `aavm-dashboard/.github/workflows/run-scraper.yml`
  - Add workflow input parameter (line ~40-50):
    ```yaml
    event_name:
      description: 'Include Event Name coverage'
      required: false
      default: 'false'
      type: string
    ```
  - Add environment variable (line ~88-90)
  - Add argument building logic (line ~137-142)
  - Add to completion logging (line ~167)

**Why all 3 are required**:
1. Dashboard sends `eventName: true` (camelCase)
2. API converts and forwards as `event_name: 'true'` (snake_case string)
3. Workflow receives and processes `event_name` parameter
4. Scraper gets `--event-name` command-line flag

---

## Phase 2: Chinese Site (ÁæéÂçéÈõÜËêÉ)

### 2.1 Create Event Page Directory
```bash
cd chinese-american-voices/app/event
mkdir [event-slug]
cd [event-slug]
```

### 2.2 Create page.js
- [ ] Copy template from existing event page (e.g., `pennsylvania-supreme-court-2025/page.js`)
- [ ] Update metadata:
  - [ ] Page title
  - [ ] Meta description
  - [ ] URL slug
  - [ ] OpenGraph tags

### 2.3 Configure Event Content
- [ ] **Event Details** (lines ~30-50):
  ```javascript
  const EVENT_CONFIG = {
    id: '[event-slug]',
    title: '[Event Title]',
    subtitle: '[Event Subtitle]',
    date: '[Election Date]',
    description: '[Event Description]',
    color: 'orange', // or blue, purple, green
    targetedEventName: '[Exact DB field value]'
  };
  ```

- [ ] **Hero Article Section** (lines ~150-250):
  - [ ] Fetch hero article with `isEventHero = true` AND `eventHeroFor = '[event-slug]'`
  - [ ] Display hero card with:
    - Large featured image
    - Chinese title
    - Chinese summary
    - "Read More" CTA
  - [ ] Set `&& article.eventHeroFor === '[event-slug]'` filter

- [ ] **Article Grid** (lines ~300-450):
  - [ ] Fetch articles with `targetedEvent = '[exact-db-name]'`
  - [ ] Filter for published articles only
  - [ ] Order by `scraped_date DESC`
  - [ ] Implement pagination (20 articles per page)
  - [ ] Article cards display:
    - Category badge (translated to Chinese)
    - Chinese title
    - Chinese summary excerpt
    - Source & date
    - Link to full article

### 2.4 Video Integration (Optional)
- [ ] Add VideoHighlightsCarousel component
- [ ] Position below hero, above article grid
- [ ] Configure:
  ```javascript
  <VideoHighlightsCarousel
    videos={eventVideos}
    language="chinese"
  />
  ```
- [ ] Verify videos load from `/api/event-videos/?event=[event-slug]&language=chinese`

### 2.5 Styling & Theme
- [ ] Update gradient colors based on event theme:
  - Orange: `from-orange-600 to-orange-700`
  - Blue: `from-blue-600 to-blue-700`
  - Purple: `from-purple-600 to-purple-700`
  - Green: `from-green-600 to-green-700`

- [ ] Verify responsive design (mobile, tablet, desktop)
- [ ] Test "Load More" pagination button
- [ ] Test "Back to Top" button

### 2.6 Voting Information Popup
- [ ] **Add state voter info to ManualVotingInfoPopup.js** (Chinese site)
  - File: `chinese-american-voices/app/components/ManualVotingInfoPopup.js`
  - Add state code to `getStateContent` function (around line 200-250)
  - Include resources:
    - Voter registration check link
    - Absentee voting information
    - Polling place lookup
    - Special election info (if applicable)
    - Important dates section
  - Use Chinese translations for all text

### 2.7 Navigation Integration
- [ ] Update event hub banner on ALL existing event pages
  - Remove old archived events from banner
  - Add new event button to banner
  - Update both desktop and mobile layouts
  - Files to update:
    - All existing event page.js files in chinese-american-voices/app/event/*/page.js
- [ ] Verify event appears in proper navigation sections

---

## Phase 3: Korean Site (ÌïúÎØ∏Î™©ÏÜåÎ¶¨)

### 3.1 Create Event Page Directory
```bash
cd korean-american-voices/app/event
mkdir [event-slug]
cd [event-slug]
```

### 3.2 Create page.js
- [ ] Copy from Chinese site event page
- [ ] Update all text to Korean:
  - [ ] Page title (Korean translation)
  - [ ] Meta description (Korean)
  - [ ] Event title/subtitle/description

### 3.3 Configure Event Content (same structure as Chinese)
- [ ] Update EVENT_CONFIG with Korean text
- [ ] Hero article: Use `koreanTitle` and Korean summary
- [ ] Article grid: Use `koreanTitle` and Korean summaries
- [ ] Category badges: Translate to Korean
  - US Politics ‚Üí ÎØ∏Íµ≠ Ï†ïÏπò
  - Immigration ‚Üí Ïù¥ÎØº
  - Education ‚Üí ÍµêÏú°
  - Healthcare ‚Üí Í±¥Í∞ï
  - Economy ‚Üí Í≤ΩÏ†ú

### 3.4 Video Integration (Optional)
- [ ] Add VideoHighlightsCarousel with `language="korean"`
- [ ] Verify separate Korean video content loads correctly

### 3.5 Styling (same as Chinese)
- [ ] Apply event theme colors
- [ ] Verify responsive design
- [ ] Test pagination and navigation

### 3.6 Voting Information Popup
- [ ] **Add state voter info to ManualVotingInfoPopup.js** (Korean site)
  - File: `korean-american-voices/app/components/ManualVotingInfoPopup.js`
  - Add state code to `getStateContent` function
  - Use Korean translations for all text
  - Same resources as Chinese site

### 3.7 Navigation Integration
- [ ] Update event hub banner on ALL existing event pages
  - Remove old archived events from banner
  - Add new event button to banner
  - Update both desktop and mobile layouts
  - Files to update:
    - All existing event page.js files in korean-american-voices/app/event/*/page.js
- [ ] Verify event appears in proper navigation sections

---

## Phase 4: Dashboard Integration

### 4.1 Event Tag Dropdown
- [ ] **Add event to "Targeted Event" dropdown**
  - File: `aavm-dashboard/app/page.js`
  - Search for: "Targeted Event" select element (around line 1800-1900)
  - Add new option:
    ```javascript
    <option value="[Event Name 2025]">[Event Name] 2025</option>
    ```
  - Value must match exact database field name

### 4.2 Event Hero Assignment
- [ ] **Add event to "Set as Event Hero" dropdown**
  - File: `aavm-dashboard/app/page.js`
  - Search for: `eventHeroFor` dropdown (around line 2800-2900)
  - Add new option:
    ```javascript
    <option value="[event-slug]">[Event Display Name]</option>
    ```
  - Value must match event page URL slug

### 4.3 Event Page Preview Links (Settings Tab)
- [ ] **Add event to "Event Pages" preview section**
  - File: `aavm-dashboard/app/page.js`
  - Navigate to Settings tab section (around line 8900-9100)
  - Add under "Active Events" section:
    ```javascript
    <div className="flex items-center justify-between p-3 bg-orange-50 rounded-lg">
      <div className="flex items-center space-x-3">
        <span className="text-2xl">üó≥Ô∏è</span>
        <div>
          <h4 className="font-medium text-gray-900">[Event Name]</h4>
          <p className="text-sm text-gray-500">Orange theme ‚Ä¢ Active</p>
        </div>
      </div>
      <div className="flex space-x-2">
        <a href="https://meihuajicui.us/event/[event-slug]" target="_blank" className="...">
          Chinese
        </a>
        <a href="https://hanmimogsoli.us/event/[event-slug]" target="_blank" className="...">
          Korean
        </a>
      </div>
    </div>
    ```
  - Move old event to "Archived Events" section with [Â∑≤ÂΩíÊ°£]/[Î≥¥Í¥ÄÎê®] prefix

### 4.4 Video Manager (Optional)
- [ ] Add event to VideoManager dropdown
- [ ] Test uploading/managing videos for this event
- [ ] Verify videos display on both Chinese and Korean event pages

---

## Phase 5: Content Population

### 5.1 Initial Articles
- [ ] Run scraper to populate initial articles
- [ ] Review scraped articles for quality
- [ ] Delete irrelevant/duplicate articles
- [ ] Verify `targetedEvent` field is set correctly

### 5.2 Tinder Review
- [ ] Use tinder mode to approve/reject articles
- [ ] Ensure good balance of coverage (local voices, different perspectives)
- [ ] Check for AAPI relevance

### 5.3 Translations & Processing
- [ ] Run orange "Translate All" button for approved articles
- [ ] Verify Chinese and Korean translations
- [ ] Review translations for accuracy/quality
- [ ] Generate AI summaries if needed

### 5.4 Hero Article Selection
- [ ] Choose 1 high-quality hero article
- [ ] Set as event hero via dropdown
- [ ] Verify hero displays prominently on event page
- [ ] Test on both Chinese and Korean sites

### 5.5 Images
- [ ] Generate images for articles (if not auto-generated)
- [ ] Verify all articles have featured images
- [ ] Check image quality and relevance

---

## Phase 6: Testing & QA

### 6.1 Functional Testing
- [ ] **Chinese Site:**
  - [ ] Event page loads without errors
  - [ ] Hero article displays correctly
  - [ ] Article grid shows filtered articles
  - [ ] Pagination works ("Load More" button)
  - [ ] Category badges show Chinese text
  - [ ] Articles link to full article pages
  - [ ] Videos display (if applicable)

- [ ] **Korean Site:**
  - [ ] Same tests as Chinese site
  - [ ] Verify Korean text throughout
  - [ ] Category badges show Korean text

### 6.2 Content Quality
- [ ] All Chinese translations accurate
- [ ] All Korean translations accurate
- [ ] Titles are punchy and engaging
- [ ] Summaries are clear and concise
- [ ] Images are relevant and high quality
- [ ] Hero article is compelling

### 6.3 Responsive Design
- [ ] Test on mobile (iPhone, Android)
- [ ] Test on tablet (iPad)
- [ ] Test on desktop (various screen sizes)
- [ ] Verify touch interactions work on mobile
- [ ] Check scroll performance

### 6.4 Performance
- [ ] Page load time < 3 seconds
- [ ] Images optimized (lazy loading)
- [ ] No JavaScript errors in console
- [ ] No layout shift on load

### 6.5 SEO
- [ ] Meta tags present and accurate
- [ ] OpenGraph tags for social sharing
- [ ] Structured data (if applicable)
- [ ] URL structure clean and descriptive
- [ ] Canonical tags set correctly

---

## Phase 7: Deployment & Launch

### 7.1 Pre-Deployment
- [ ] Commit all changes to Git
- [ ] Write clear commit messages
- [ ] Push to GitHub main branch

### 7.2 Vercel Deployment
- [ ] Verify auto-deploy triggered
- [ ] Check build logs for errors
- [ ] Wait for deployment to complete

### 7.3 Production Verification
- [ ] Visit Chinese event page: `https://meihuajicui.us/event/[event-slug]`
- [ ] Visit Korean event page: `https://hanmimogsoli.us/event/[event-slug]`
- [ ] Test all functionality on production
- [ ] Verify analytics tracking works

### 7.4 Monitoring
- [ ] Set up alerts for errors (if applicable)
- [ ] Monitor analytics for page views
- [ ] Check for broken links
- [ ] Monitor scraper runs

---

## Phase 8: Ongoing Maintenance

### 8.1 Content Updates
- [ ] Run scraper daily/weekly (depending on event timeline)
- [ ] Review new articles for quality
- [ ] Update hero article as needed
- [ ] Add videos if relevant content becomes available

### 8.2 Performance Monitoring
- [ ] Check page load times weekly
- [ ] Monitor user engagement metrics
- [ ] Review bounce rates
- [ ] Track scroll depth

### 8.3 Post-Election
- [ ] Decide whether to archive event page
- [ ] Update page with election results (if applicable)
- [ ] Consider adding "Event Archive" badge
- [ ] Disable scraper if no longer needed

---

## Common Pitfalls to Avoid

### Critical Integration Bugs ‚ö†Ô∏è
- ‚ùå **MOST COMMON**: Forgetting to add event parameter to API endpoint (`app/api/trigger-github-action/route.js`)
  - Symptom: Dashboard checkbox works, but scraper always receives "false" in workflow logs
  - Fix: Must add parameter to 3 places in API endpoint (destructuring, logging, GitHub inputs)
  - This was the root cause of Tennessee scraper not working initially
- ‚ùå Case mismatch between dashboard (camelCase) and workflow (snake_case)
  - Dashboard sends: `tennessee7thDistrict`
  - API must convert to: `tennessee_7th_district`
  - Workflow receives: `tennessee_7th_district`
- ‚ùå Not waiting for Vercel deployment to complete before testing scraper
  - Dashboard changes take 1-2 minutes to deploy
  - Running scraper with old dashboard code will still show old behavior

### Technical Issues
- ‚ùå Forgetting to set `targetedEvent` field correctly in scraper config
- ‚ùå Using wrong event slug in different files (inconsistency)
- ‚ùå Not testing pagination with large article counts
- ‚ùå Hardcoding event name instead of using variable
- ‚ùå Not setting dynamic rendering (`export const dynamic = 'force-dynamic'`)
- ‚ùå Missing state code in ManualVotingInfoPopup.js (voting info button won't work)
- ‚ùå Not updating event hub banner on ALL old event pages

### Content Issues
- ‚ùå Choosing weak hero article (not engaging enough)
- ‚ùå Not reviewing translations for quality
- ‚ùå Including irrelevant articles (low AAPI relevance)
- ‚ùå Forgetting to generate images for articles
- ‚ùå Not researching local news sources thoroughly (missing key regional papers)

### UX Issues
- ‚ùå Using wrong color theme (inconsistent with other event pages)
- ‚ùå Not testing on mobile (most users are mobile-first)
- ‚ùå Slow page load times due to unoptimized images
- ‚ùå Broken "Load More" pagination
- ‚ùå Not testing voting info popup on both sites

---

## Quick Reference: File Locations

### Public Sites
```
chinese-american-voices/app/event/[event-slug]/page.js
korean-american-voices/app/event/[event-slug]/page.js
```

### Dashboard
```
aavm-dashboard/app/page.js (event hero dropdown)
aavm-dashboard/app/components/VideoManager.js (video management)
```

### Scrapers
```
aavm_scraper_events.py (multi-event scraper)
aavm_scraper_[state]_[event].py (dedicated scraper)
```

### GitHub Actions
```
.github/workflows/[event-slug]-scraper.yml
```

### API Endpoints
```
/api/published-articles (filtered by targetedEvent)
/api/event-videos (videos for specific event)
/api/trigger-github-action (CRITICAL: Must add new event parameters here)
```

### Voting Info Components
```
chinese-american-voices/app/components/ManualVotingInfoPopup.js
korean-american-voices/app/components/ManualVotingInfoPopup.js
```

---

## Checklist Summary

**Total Steps**: ~120 checkboxes across 8 phases

**Estimated Time**:
- Setup & Configuration: 2-3 hours
- Content Population: 1-2 hours
- Testing & QA: 1-2 hours
- **Total**: 4-7 hours for complete event page launch

**Required Skills**:
- Next.js/React basics
- Database field mapping
- Git/GitHub workflows
- Content curation
- Chinese & Korean language review

---

**Last Updated**: 2025-11-06 (Updated with Tennessee implementation learnings)
**Template Version**: 2.0

---

## Changelog

### Version 2.0 (2025-11-06) - Tennessee Implementation Learnings
- Added critical section on 3-file manual scraper integration (dashboard, API endpoint, workflow)
- Highlighted most common bug: forgetting to add event parameter to API endpoint
- Added voting info popup integration steps for both Chinese and Korean sites
- Expanded dashboard integration with event tag dropdown, hero assignment, and preview links
- Added detailed scraper configuration steps with local news source research guidance
- Added navigation update steps for ALL existing event pages
- Updated Common Pitfalls with critical integration bugs section
- Added case mismatch warning (camelCase vs snake_case)
- Updated file locations reference with API endpoints and voting info components

### Version 1.0 (2025-10-XX) - Initial Template
- Created comprehensive 8-phase checklist
- ~120 checkboxes covering all event page creation steps
- Based on Pennsylvania, Georgia, California, and New Jersey implementations
